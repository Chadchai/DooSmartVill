<!DOCTYPE.html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>DooSmartVill- สรุปรายรับ</title>

  <!-- Custom fonts for this template-->
  <link href="assets/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Kanit:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

  <!-- Custom styles for this template-->
 <link href="assets/css/sb-admin-2.css" rel="stylesheet">

</head>

<body id="page-top">

  <!-- Page Wrapper -->
  <div id="wrapper">

    <%- include('partials/adminheader.ejs') %>
        <!-- End of Topbar -->

        <!-- Begin Page Content -->
        <div class="container-fluid">

          <!-- Page Heading -->
          <div class="d-sm-flex align-items-center justify-content-between mb-4">
            <h1 class="h3 mb-0 text-gray-800">สรุปรายรับ</h1>
            <!-- <a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i class="fas fa-download fa-sm text-white-50"></i> Generate Report</a> -->
          </div>

          <!-- Content Row -->
          <div class="row">

             <!-- Earnings (Daily) Card Example -->
             <div class="col-xl-3 col-md-6 mb-4">
              <div class="card border-left-success shadow h-100 py-2">
                <div class="card-body">
                  <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                      <div class="text-xs font-weight-bold text-success text-uppercase mb-1">รายรับเดือนนี้(บาท)</div>
                      <div class="h5 mb-0 font-weight-bold text-gray-800"><%= monthincome %> บาท</div>
                    </div>
                    <div class="col-auto">
                      <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Earnings (Monthly) Card Example -->
            <div class="col-xl-3 col-md-6 mb-4">
              <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                  <div class="row no-gutters align-items-center">
                    <div class="col mr-2">

                      <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">รายจ่ายเดือนนี้(บาท)</div>
                      
                      <% if (monthexpense == null) {%>
                       
                        <div id="sum1" class="h5 mb-0 font-weight-bold text-gray-800"> 40,000 บาท</div>
                        <% } else {%>
                          <span id="sum1" class="h3 font-weight-bold mb-0 align-center"></span>
                          <div id="sum1" class="h5 mb-0 font-weight-bold text-gray-800"> <%= monthexpense %> บาท</div>
                       
                          <% } %>
                      
                    </div>
                    <div class="col-auto">
                      <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Earnings (Monthly) Card Example -->
            <div class="col-xl-3 col-md-6 mb-4">
              <div class="card border-left-success shadow h-100 py-2">
                <div class="card-body">
                  <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                      <div class="text-xs font-weight-bold text-success text-uppercase mb-1">รายรับรวมทั้งปี(บาท)</div>
                      <div class="h5 mb-0 font-weight-bold text-gray-800"><%= yearincome %> บาท</div>
                      <input type="hidden" name="paymenttype" data-form-field="Phone" class="form-control display-7" id="paymenttype" value="<%= paymentype %>">
                      <input type="hidden" name="sum" data-form-field="Phone" class="form-control display-7" id="amount" value="<%= amount %>">
                      <input type="hidden" name="expensetype" data-form-field="Phone" class="form-control display-7" id="expensetype" value="<%= expensetype %>">
                      <input type="hidden" name="expenseamount" data-form-field="Phone" class="form-control display-7" id="expenseamount" value="<%= expenseamount %>">
                      <input type="hidden" name="incomebymonth" data-form-field="Phone" class="form-control display-7" id="incomebymonth" value="<%= incomebymonth %>">
                      <input type="hidden" name="percentbymonth" data-form-field="Phone" class="form-control display-7" id="percentbymonth" value="<%= percentbymonth %>">
                      <input type="hidden" name="invoicetype" data-form-field="Phone" class="form-control display-7" id="invoicetype" value="<%= invoicetype %>">
                      <input type="hidden" name="incomebytype" data-form-field="Phone" class="form-control display-7" id="incomebytype" value="<%= incomebytype %>">
                
                    </div>
                    <div class="col-auto">
                      <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Earnings (Monthly) Card Example -->
            <div class="col-xl-3 col-md-6 mb-4">
              <div class="card border-left-info shadow h-100 py-2">
                <div class="card-body">
                  <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                      <div class="text-xs font-weight-bold text-info text-uppercase mb-1">รายจ่ายรวมทั้งปี(บาท)</div>
                      <div class="row no-gutters align-items-center">
                        <div class="col-auto">
                          <div class="h5 mb-0 mr-3 font-weight-bold text-gray-800"><%= yearexpense %> บาท</div>
                        </div>
                        <div class="col">
                          <!-- <div class="progress progress-sm mr-2">
                            <div class="progress-bar bg-info" role="progressbar" style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                          </div> -->
                        </div>
                      </div>
                    </div>
                    <div class="col-auto">
                      <i class="fas fa-users fa-2x text-gray-300"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Pending Requests Card Example -->
            <!-- <div class="col-xl-2 col-md-6 mb-4">
              <div class="card border-left-warning shadow h-100 py-2">
                <div class="card-body">
                  <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                      <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">รายการจองล่วงหน้า</div>
                      <div class="h5 mb-0 font-weight-bold text-gray-800">320 ชั่วโมง</div>
                    </div>
                    <div class="col-auto">
                      <i class="fas fa-calendar fa-2x text-gray-300"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div> -->
          </div>

          <!-- Content Row -->

          <div class="row">

            <!-- Area Chart -->
            <div class="col-xl-8 col-lg-7">
              <div class="card shadow mb-4">
                <!-- Card Header - Dropdown -->
                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                  <h6 class="m-0 font-weight-bold text-primary">รายรับรายเดือน</h6>
                  <div class="dropdown no-arrow">
                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in" aria-labelledby="dropdownMenuLink">
                      <div class="dropdown-header">Dropdown Header:</div>
                      <a class="dropdown-item" href="#">Action</a>
                      <a class="dropdown-item" href="#">Another action</a>
                      <div class="dropdown-divider"></div>
                      <a class="dropdown-item" href="#">Something else here</a>
                    </div>
                  </div>
                </div>
                <!-- Card Body -->
                <div class="card-body" style="height: 500px;">
                  <div class="chart-bar">
                    <canvas id="myChart2" class="col col-lg-12" width="200" height="90"   style="border-style: solid;border-radius: 30px;border-color: white;padding-bottom:20px;background-color: white"></canvas>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-4 col-lg-5">
              <div class="card shadow mb-4">
                <!-- Card Header - Dropdown -->
                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                  <h6 class="m-0 font-weight-bold text-primary">รายรับรายประเภท</h6>
                  <div class="dropdown no-arrow">
                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in" aria-labelledby="dropdownMenuLink">
                      <div class="dropdown-header">Dropdown Header:</div>
                      <a class="dropdown-item" href="#">Action</a>
                      <a class="dropdown-item" href="#">Another action</a>
                      <div class="dropdown-divider"></div>
                      <a class="dropdown-item" href="#">Something else here</a>
                    </div>
                  </div>
                </div>
                <!-- Card Body -->
                <div class="card-body" style="padding: 20px;height: 500px;">
                  <div class="chart-pie pt-4 pb-2">
                    <canvas id="myChart"  height="250"  style="border-style: solid;;border-radius: 30px;border-color: white;padding:20px;background-color: white;"></canvas>
                  </div>
                  <div class="mt-4 text-center small">
                    <span class="mr-2">
                      <i class="fas fa-circle text-warning" ></i> เงินโอน
                    </span>
                    <span class="mr-2">
                      <i class="fas fa-circle text-success"></i> เงินสด
                    </span>
                    <!-- <span class="mr-2">
                      <i class="fas fa-circle text-info"></i> Referral
                    </span> -->
                  </div>
                </div>
              </div>
            </div>

            <div class="col-xl-8 col-lg-7">
              <div class="card shadow mb-4">
                <!-- Card Header - Dropdown -->
                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                  <h6 class="m-0 font-weight-bold text-primary">จำนวนบ้านที่ชำระค่าส่วนกลางแต่ละเดือน</h6>
                  <div class="dropdown no-arrow">
                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in" aria-labelledby="dropdownMenuLink">
                      <div class="dropdown-header">Dropdown Header:</div>
                      <a class="dropdown-item" href="#">Action</a>
                      <a class="dropdown-item" href="#">Another action</a>
                      <div class="dropdown-divider"></div>
                      <a class="dropdown-item" href="#">Something else here</a>
                    </div>
                  </div>
                </div>
                <!-- Card Body -->
                <div class="card-body" style="padding: 20px;height: 500px;">
                  <div class="chart-area" style="padding: 20px;">
                    <canvas id="myChart4" class="col col-lg-12" width="200" height="80"   style="border-style: solid;border-radius: 30px;border-color: white;padding:20px;background-color: white"></canvas>
                  </div>
                </div>
              </div>
            </div>

            <!-- Pie Chart -->

            <div class="col-xl-4 col-lg-5">
              <div class="card shadow mb-4">
                <!-- Card Header - Dropdown -->
                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                  <h6 class="m-0 font-weight-bold text-primary">รายจ่ายรายประเภท</h6>
                  <div class="dropdown no-arrow">
                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in" aria-labelledby="dropdownMenuLink">
                      <div class="dropdown-header">Dropdown Header:</div>
                      <a class="dropdown-item" href="#">Action</a>
                      <a class="dropdown-item" href="#">Another action</a>
                      <div class="dropdown-divider"></div>
                      <a class="dropdown-item" href="#">Something else here</a>
                    </div>
                  </div>
                </div>
                <!-- Card Body -->
                <div class="card-body" style="padding: 20px;height: 500px;">
                  <div class="chart-pie pt-4 pb-2" style="padding: 20px;">
                    <canvas id="myChart1"  height="250"  style="border-style: solid;;border-radius: 10px;border-color: white;padding-bottom:20px;background-color: white;"></canvas>
                  </div>
                   <div class="mt-4 text-center small">
                  <!--  <span class="mr-2">
                      <i class="fas fa-circle text-primary" ></i> ได้จากสมาชิก
                    </span>
                    <span class="mr-2">
                      <i class="fas fa-circle text-success"></i> จากบุคคลทั่วไป
                    </span>
                    <span class="mr-2">
                      <i class="fas fa-circle text-info"></i> Referral
                    </span> -->
                  </div> 
                </div>
              </div>
            </div>
        
          </div>

          <!-- Content Row -->
          

        </div>
        <!-- /.container-fluid -->

      </div>
      <!-- End of Main Content -->

         <!-- Footer -->
         <%- include('partials/adminfooter.ejs') %>
         <!-- End of Footer -->

    </div>
    <!-- End of Content Wrapper -->

  </div>
  <!-- End of Page Wrapper -->

  <!-- Scroll to Top Button-->
  <a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
  </a>

  <!-- Logout Modal-->
  <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
          <button class="close" type="button" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
          <a class="btn btn-primary" href="login.ejs">Logout</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap core JavaScript-->
  <script src="assets/vendor/jquery/jquery.min.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Core plugin JavaScript-->
  <script src="assets/vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for all pages-->
  <script src="assets/js/sb-admin-2.min.js"></script>

  <!-- Page level plugins -->
  <script src="assets/vendor/chart.js/Chart.min.js"></script>

  <!-- Page level custom scripts -->
  <!-- <script src="assets/js/demo/chart-area-demo.js"></script>
  <script src="assets/js/demo/chart-pie-demo.js"></script>
  <script src="assets/js/demo/chart-bar-demo.js"></script> -->

</body>

</html>
<script>
  var x = screen.width;
    
    if (x<500) {
      document.getElementById('myChart2').height = 80;
      document.getElementById('myChart2').style = "border-style: solid;border-radius: 10px;border-color: white;padding:0px;background-color: white";
    } 
    var label1 = document.getElementById("paymenttype").value.split(',');
    var data1 = document.getElementById("amount").value.split(',');
    var label2 = document.getElementById("expensetype").value.split(',');
    var data2 = document.getElementById("expenseamount").value.split(',');
    var label4 = document.getElementById("invoicetype").value.split(',');
    var data4 = document.getElementById("incomebytype").value.split(',');
    var data3 = document.getElementById("incomebymonth").value.split(',');
    var data5 = document.getElementById("percentbymonth").value.split(',');

    var ctx2 = document.getElementById('myChart2');

var myChart2 = new Chart(ctx2, {
    type: 'bar',
    data: {
        labels: [ 'Jan','Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov','Dec'],
        datasets: [{
            label: '',
            data: data3,
            backgroundColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)',
                'rgb(205, 242, 202)',
                'rgb(255, 222, 250)',
                'rgb(255, 200, 152)',
                'rgb(61, 44, 141)',
                'rgb(145, 107, 191)',
                'rgb(57, 163, 136)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)',
                'rgb(205, 242, 202)',
                'rgb(255, 222, 250)',
                'rgb(255, 200, 152)',
                'rgb(61, 44, 141)',
                'rgb(145, 107, 191)',
                'rgb(57, 163, 136)'
            ],
            borderWidth: 0
        }]
    },
    options: {
            showAllTooltips: true,
            legend: {
      display: false
    },
    }
    
    
});
var ctx = document.getElementById("myChart4").getContext("2d");
var myBar = new Chart(ctx, {
		type: 'bar',
    data: {
        labels: [ 'Jan-64','Feb-64', 'Mar-64', 'Apr-64', 'May-64', 'Jun-64', 'Jul-64', 'Aug-64', 'Sep-64', 'Oct-64', 'Nov-64','Dec-64'],
        datasets: [{
            label: '',
            data: data5,
           
            backgroundColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)',
                'rgb(205, 242, 202)',
                'rgb(255, 222, 250)',
                'rgb(255, 200, 152)',
                'rgb(61, 44, 141)',
                'rgb(145, 107, 191)',
                'rgb(57, 163, 136)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)',
                'rgb(205, 242, 202)',
                'rgb(255, 222, 250)',
                'rgb(255, 200, 152)',
                'rgb(61, 44, 141)',
                'rgb(145, 107, 191)',
                'rgb(57, 163, 136)'
            ],
            borderWidth: 0
        }]
    },

    options: {
      showAllTooltips: true,
      legend: {
      display: false
    },
      
    }
}); 
var ctx5 = document.getElementById('myChart');
var myChart = new Chart(ctx5, {
    type: 'doughnut',
    data: {
        labels: label1,
        datasets: [{
            label: 'รายรับเดือนนี้',
            data: data1,
            backgroundColor: [
               
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderColor: [
               
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 0
        }]
    },
    options: {
        scales: {
         
        },
        legend: {
      display: false
    },
    },
    
});
var ctx1 = document.getElementById('myChart1');
var myChart1 = new Chart(ctx1, {
    type: 'doughnut',
    data: {
        labels: label2,
        datasets: [{
            label: 'รายจ่ายรายประเภท',
            data: data2,
            backgroundColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 0
        }]
    },
    options: {
        scales: {
          
        },
        
    }
}); 

var ctx3 = document.getElementById('myChart3');
var myChart3 = new Chart(ctx3, {
    type: 'doughnut',
    data: {
        labels: label4,
        datasets: [{
            label: 'รายรับรายประเภท',
            data: data4,
            backgroundColor: [
               
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderColor: [
              
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 0
        }]
    },
    options: {
        scales: {
          
        }
    }
});

Chart.pluginService.register({
			beforeRender: function (chart) {
				if (chart.config.options.showAllTooltips) {
					// create an array of tooltips
					// we can't use the chart tooltip because there is only one tooltip per chart
					chart.pluginTooltips = [];
					chart.config.data.datasets.forEach(function (dataset, i) {
						chart.getDatasetMeta(i).data.forEach(function (sector, j) {
							chart.pluginTooltips.push(new Chart.Tooltip({
								_chart: chart.chart,
								_chartInstance: chart,
								_data: chart.data,
								_options: chart.options.tooltips,
								_active: [sector]
							}, chart));
						});
					});

					// turn off normal tooltips
					chart.options.tooltips.enabled = false;
				}
			},
			afterDraw: function (chart, easing) {
				if (chart.config.options.showAllTooltips) {
					// we don't want the permanent tooltips to animate, so don't do anything till the animation runs atleast once
					if (!chart.allTooltipsOnce) {
						if (easing !== 1)
							return;
						chart.allTooltipsOnce = true;
					}

					// turn on tooltips
					chart.options.tooltips.enabled = true;
					Chart.helpers.each(chart.pluginTooltips, function (tooltip) {
						tooltip.initialize();
						tooltip.update();
						// we don't actually need this since we are not animating tooltips
						tooltip.pivot();
						tooltip.transition(easing).draw();
					});
					chart.options.tooltips.enabled = false;
				}
			}
		});


// var ctx4 = document.getElementById('myChart4');

    
   
// var myChart4 = new Chart(ctx4, {
//     type: 'bar',
//     data: data,
//     options: options,
    
    
    
// });
</script>