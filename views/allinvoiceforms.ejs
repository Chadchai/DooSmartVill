<!DOCTYPE.html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <base href="/">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>DooSmartVill - Print All Invoice</title>

  <!-- Custom fonts for this template-->
  <link href="assets/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Kanit:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

  <!-- Custom styles for this template-->
 <link href="assets/css/sb-admin-2.css" rel="stylesheet">
  <link rel="preload" as="style" href="assets/mobirise/css/mbr-additional.css"><link rel="stylesheet" href="assets/mobirise/css/mbr-additional.css" type="text/css">
  
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <style type="text/css">
  #content {
    display: table;
}
      #pageFooter {
          display: table-footer-group;
      }

      #pageFooter:after {
          counter-increment: page;
          content: counter(page);
      }
   
      @media print
      {
          #non-printable { display: none; }
          #printable { display: block;background-color: white; }
          /* #printable1{ display: block; } */
      }
      @page {
          size: A4;
          margin: 0;
      }
      </style>       
</head>

<style>
.blink {
  animation: blinker 1s step-start infinite;
}

@keyframes blinker {
  50% {
    opacity: 0;
  }
}

</style>

<body id="page-top" >

  <!-- Page Wrapper -->
  <div id="wrapper">
    <%- include('partials/adminheader.ejs') %>

        <!-- Begin Page Content -->
        <div class="container-fluid" style="min-height:75%;">

          <!-- Page Heading -->
          <div id="non-printable">
          <div class="d-sm-flex align-items-center justify-content-between mb-4">
            <a  class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm" onclick="window.history.back()"><i class="fas fa-angle-double-left fa-sm text-white-50"></i> กลับ</a>
      
            <h1 class="h3 mb-0 text-gray-800" style="color: blue;"><div id="txt"></div></h1>
           
            <a  class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm" onclick="window.print()"><i class="fas fa-print fa-sm text-white-50"></i> พิมพ์ใบแจ้งหนี้</a>
            <!-- <h1 class="h3 mb-0 text-gray-800" style="color: blue;"><div id="txt"></div></h1> -->
            <!-- <a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i class="fas fa-download fa-sm text-white-50"></i> Generate Report</a> -->
          </div>
        </div>
          <!-- Content Row -->


          <!-- Content Row -->

                     <!-- Color System -->
                     <div id="non-printable">
          
                    
                      <button type="button" id="printpdf" class="btn btn-primary btn-form display-4" style="border-radius: 30px;display:none" onclick="printJS('printable', 'html');"> <span class="mbri-save"></span> บันทึก</button>
             
              </div>
              
              <% if (houselist.length > 0) {%>

                <% houselist.forEach((house, index) => { %>
                    <% if (index % 2 == 0) {%>
                    <p style="page-break-before: always">
                        <br>
                        
                        <% } %>
                <div id="printable" style="width:98%;background-color: white;color: black;">
                  <div class="invoice-box" style="color: black;" >
                    <table cellpadding="0" cellspacing="0" style="border-style: solid;border-color: black;padding: 15px;min-height: 170mm;">
                        <tr class="top">
                            <td colspan="2">
                          
                                <table>
                          
                                    <tr>
                                        <td class="title">
                                            <img src="assets/images/idesign1.png" style="width:100%; max-width:300px;" />
                                            </td>
                                    
                                          
                                        <td style="margin-top: -20px;">
                                            เลขที่ใบแจ้งหนี้: INV<%= house.invoice_no %>
                                            <br> วันที่ออก: <%= house.invoicedate %>
                                            <br>  นิติบุคคลหมู่บ้านไอน์ดีไซน์ บัญชีออมทรัพย์ ธ.ไทยพาณิชย์ เลขที่  <a style="font-weight: bold;font-size: large;">171-272623-1 </a> 
                                        
                                        </td>
                                       
                                    </tr>
                                 
                                </table>
                                <table  style="margin-top:-100px;align-items:right;"> 
                                    <tr>     
                                        <td class="title align-right"  >
                                            
                                          </td>                         
                                      <td class="title align-right"  >
                                        ใบแจ้งชำระค่าส่วนกลาง
                                      </td>
                                       
                                    </tr>
                             
                                </table>
                            </td>
                        </tr>
                        
                        <tr class="information "  >
                            <td colspan="2 " class="align-right" style="height:20px;" >
                                <table>
                                    <tr>
                                        <td>
                                            
                                         <a style="font-weight: bold;"> <%= house.owner_name %><br></a>
                                            บ้านเลขที่ <a style="font-weight: bold;font-size: large;"><%= house.house_no %></a> ซอยที่ <a style="font-weight: bold;font-size: large;"><%= house.lane_no %></a><br>
                                            ถนน เลียบคลองสอง แขวง บางชัน เขตคลองสามวา กรุงเทพมหานคร 10510
                                            </td>
                                       
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        
                        <tr class="heading" style="margin-top: -100px;background-color:lightgray" >
                            <td>
                                รายการ
                            </td>
                            <td>
                               จำนวนเงิน
                            </td>
                        </tr>
                        <% if (invoicelist.length > 0) {%>
                            <% invoicelist.forEach((invoice, index1) => { %>
                        <% if (house.house_no == invoice.house_no) {%>
                            <% if (invoice.START !== invoice.END) {%>
                            <tr class="item" style="font-size: medium;">
                           
                                <td>
                                  <%= invoice.invoice_type %> เดือน <%= invoice.START %> - <%= invoice.END %>  ( <%= invoice.amount1 %> บาท/เดือน  )
                                </td>
                                <td>
                                  <%= invoice.amount %> บาท
                                </td>
                                   
                            </tr>
                            <% } else {%>
                                <tr class="item" style="font-size: medium;">
                           
                                    <td>
                                      <%= invoice.invoice_type %> เดือน <%= invoice.START %>  ( <%= invoice.amount1 %> บาท/เดือน  )
                                    </td>
                                    <td>
                                      <%= invoice.amount %> บาท
                                    </td>
                                       
                                </tr>
                                <% } %>
                            <% invoicelist1.forEach((invoice1, index2) => { %>
                            <% if (invoice.house_no == invoice1.house_no) {%>
                                <% if (invoice1.START !== invoice1.END) {%>
                                <tr class="item" style="font-size: medium;">
                               
                                    <td>
                                      <%= invoice1.invoice_type %> เดือน <%= invoice1.START %> - <%= invoice1.END %>  ( <%= invoice1.amount1 %> บาท/เดือน  )
                                    </td>
                                    
                                    <td>
                                      <%= invoice1.amount %> บาท
                                    </td>
                                       
                                </tr>
                                <% } else {%>
                                    <tr class="item" style="font-size: medium;">
                               
                                        <td>
                                          <%= invoice1.invoice_type %> เดือน <%= invoice1.START %> ( <%= invoice1.amount1 %> บาท/เดือน  )
                                        </td>
                                        
                                        <td>
                                          <%= invoice1.amount %> บาท
                                        </td>
                                           
        
                                    <% }%>   
        
                                <% } %>
        
                                <% }) %>
        
                        <% } %>
        
                        <% }) %>
                        <tr class="item" style="font-size: medium;">
                            <% if (house.remain1  > 0) {%>
                                <td >
                                    ยอดเงินชำระไว้เกินยกมา:
                                </td>
                                <td >
                                   <%= house.remain  %> บาท
                                </td>
                                <% } else if (house.remain1 < 0) { %>
                                    <td >
                                        เงินค้างชำระเมื่อสิ้นมกราคม 63 ยกมา: 
                                    </td>
                                    <td >
                                        <%= house.remain  %> บาท
                                    </td>
                                    <% } else {  %>
                                        <td >
                                       
                                        </td>
                                        <td >
                                        
                                        </td>
                                        <% } %>
                        </tr>
                        <tr class="total " style="font-size: large;">
                          
                            <td colspan="2" style="text-align: right;">
                                รวมที่ต้องชำระทั้งสิ้น: <%= house.t_amount %> บาท
                            </td>
                        </tr>
                        <% if (house.remain1  < -5000) {%>
                        <tr class="total " style="font-size: large;">
                            
                            <td colspan="2" style="text-align: right;font-size: small;color:red">
                                (เงินจำนวนนี้ไม่รวมค่าปรับค้างชำระ)
                            </td>
                           
                        </tr>
                        <% } else { %>
                            <tr class="total " style="font-size: large;">
                            
                                <td colspan="2" style="text-align: right;font-size: small;color:red">
                               
                                </td>
                               
                            </tr>
                            <% } %>
                        
                        <% } %>
                       
                        
                        <tr class="information " >
                          <td colspan="2 ">
                              <table style="margin-top:-20px">
                                  <tr>
        
                                    <td>
                                 
                                   </td>
                                      <td>
                                        
                                         ผู้ออกใบแจ้งหนี้<br>
                                         <br>
                                         ลงชื่อ ___________________________<br>
                                          
                                          
                                      </td>
                                      
                                  </tr>
                              </table>
                              <p class="align-center" style="font-size:medium;margin-top: -10px;text-align: center;"> ******ใบแจ้งหนี้นี้อยู่ในระหว่างการพัฒนาระบบ หากพบข้อมูลไม่ถูกต้องให้ติดต่อนิติบุคคลในเวลาทำการ*******</p> 
                     
                          </td>
                      </tr>
                    </table>
        
                </div>
            </div>
            
            <% }) %>
                   
                        
            <% } %>
         
                     
      <!-- End of Main Content -->

       <!-- Footer -->
       <%- include('partials/adminfooter.ejs') %>
       <!-- End of Footer -->

    </div>
    <!-- End of Content Wrapper -->

  </div>
  <!-- End of Page Wrapper -->

  <!-- Scroll to Top Button-->
  <a class="scroll-to-top rounded " href="#page-top">
    <i class="fas fa-angle-up"></i>
  </a>

  <!-- Logout Modal-->
  <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
          <button class="close" type="button" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
          <a class="btn btn-primary" href="login.ejs">Logout</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap core JavaScript-->
  <script src="assets/vendor/jquery/jquery.min.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Core plugin JavaScript-->
  <script src="assets/vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for all pages-->
  <script src="assets/js/sb-admin-2.min.js"></script>

  <!-- Page level plugins -->
  <script src="assets/vendor/chart.js/Chart.min.js"></script>

  <!-- Page level custom scripts -->
  <script src="assets/js/demo/chart-area-demo.js"></script>
  <script src="assets/js/demo/chart-pie-demo.js"></script>
  <script>
    var x = screen.width;
    var iOS = !!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform);
       if (x<800) {
         document.getElementById('head').style = "margin-top:-10px";
         document.getElementById('printable1').style.display = "none";
         document.getElementById('printpdf').style= "display:in-line;border-radius: 30px;";
         if (iOS == true) {
            document.getElementById('printable').style = "width:95%";
            //document.getElementById('printable1').style.display = "none";
        document.getElementById('head1').style= "display:none";
        document.getElementById('blank1').style= "display:none";
        document.getElementById('head').style= "margin-top:0px";
        document.getElementById('headios').style= "display:in-line";
        document.getElementById('headios1').style= "display:in-line";
      }
         //document.getElementById('myChart2').style = "border-style: solid;border-radius: 10px;border-color: white;padding:0px;background-color: white";
       } 
   
   </script>
   
   <script src="https://printjs-4de6.kxcdn.com/print.min.js"></script>

  <script>
    function startTime() {
      var today = new Date();
      var d = today.getDate();
      var mm = today.getMonth();
      var y = today.getFullYear();
      var h = today.getHours();
      var m = today.getMinutes();
      var s = today.getSeconds();
      var month = new Array();
           month[0] = "มกราคม";
           month[1] = "กุมภาพันธ์";
           month[2] = "มีนาคม";
           month[3] = "เมษายน";
           month[4] = "พฤษภาคม";
           month[5] = "มิถุนายน";
           month[6] = "กรกฎาคม";
           month[7] = "สิงหาคม";
           month[8] = "กันยายน";
           month[9] = "ตุลาคม";
           month[10] = "พฤศจิกายน";
           month[11] = "ธันวาคม";
      m = checkTime(m);
      s = checkTime(s);
      document.getElementById('txt').innerHTML =
     "วันที่ " + d + " " + month[mm] + " " + y + " เวลา " + h + ":" + m + ":" + s;
      var t = setTimeout(startTime, 500);
    }
    function checkTime(i) {
      if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
      return i;
    }
    </script>
</body>

</html>
